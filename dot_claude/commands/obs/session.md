---
name: session
description: "Сохранение действий текущей сессии Claude Code в daily note"
category: utility
complexity: low
mcp-servers: []
personas: []
---

# /obs:session - Сохранение сессии в Daily Note

Анализ действий выполненных в текущей сессии Claude Code и запись в daily note.

## Triggers
- Завершение рабочей сессии
- Желание задокументировать проделанную работу
- Создание отчёта о сессии

## Usage
```
/obs:session [--date YYYY-MM-DD]
```

**Аргументы:**
- `--date YYYY-MM-DD` — дата daily note (по умолчанию: сегодня)

## Behavioral Flow

Когда пользователь вызывает `/obs:session`:

1. **Определение даты**
   ```
   Если указана --date → использовать её
   Если не указана → использовать сегодняшнюю дату
   ```

2. **Анализ сессии**
   Проанализировать контекст разговора и собрать:
   - Созданные файлы
   - Изменённые файлы
   - Созданные skills
   - Выполненные git операции
   - Проведённые аудиты/исследования
   - Ключевые решения и выводы

3. **Проверка daily note**
   ```bash
   # Проверить существует ли daily note
   ls "10 Daily/YYYY-MM-DD.md"
   ```

4. **Если daily note НЕ существует:**
   - Создать по шаблону Daily Note
   - Добавить секцию сессии

5. **Читать текущую daily note**
   ```bash
   # Прочитать содержимое
   Read "10 Daily/YYYY-MM-DD.md"
   ```

6. **Обновить секцию Tasks**

   **ВАЖНО: Разделение задач пользователя и Claude**

   ```markdown
   ## Tasks
   ### Мои задачи
   - [ ] Задача пользователя (с чекбоксом для отслеживания)
   - [x] Выполненная задача пользователя

   ### Выполнено Claude Code
   - Действие 1 (простой список БЕЗ чекбоксов)
   - Действие 2
   - Действие 3
   ```

   - **Задачи пользователя** — с чекбоксами `- [ ]` / `- [x]` для визуального отслеживания
   - **Действия Claude** — простой список `- ` без чекбоксов (не перечёркивается)

7. **Обновить секцию Notes**
   Добавить детали в `### Claude Code Session`:

   ```markdown
   ### Claude Code Session

   #### Созданные файлы
   - `path/to/file.md` — описание

   #### Skills
   | Skill | Описание |
   |-------|----------|
   | `/skill:name` | Что делает |

   #### Git
   - Коммиты: N
   - Репозиторий: URL
   ```

8. **Git commit**
   ```bash
   git add "10 Daily/YYYY-MM-DD.md"
   git commit -m "Update daily note with session summary"
   git push
   ```

9. **Вывод результата**
   ```
   ✅ Сессия сохранена в 10 Daily/YYYY-MM-DD.md

   Записано:
   - N созданных файлов
   - M изменённых файлов
   - K выполненных задач
   - Закоммитил и запушил изменения
   ```

## Формат записи сессии

### В секции Tasks:
```markdown
## Tasks
### Мои задачи
- [ ] Сделать код-ревью PR #123
- [x] Написать тесты для модуля X

### Выполнено Claude Code
- Обработал Inbox (3 файла)
- Создал структуру папок Work/Health
- Провёл аудит GitLab репозиториев
- Создал skill /obs:session
```

### В секции Notes:
```markdown
### Claude Code Session

#### Созданные файлы
- `30 Wiki/Article.md` — статья о технологии X
- `60 Resources/Cheatsheets/Tool.md` — шпаргалка по инструменту

#### Созданные Skills
| Skill | Описание |
|-------|----------|
| `/namespace:command` | Краткое описание |

#### Git
- Репозиторий: https://github.com/user/repo
- Коммиты: `abc123` Message 1, `def456` Message 2
```

## Примеры использования

### Сохранить текущую сессию
```
/obs:session
```

### Сохранить в конкретную дату
```
/obs:session --date 2026-01-15
```

## Интеграция с другими skills

- После `/obs:inbox` — записать обработанные файлы
- После `/gitlab:audit` — записать результаты аудита
- После `/github:init` — записать созданный репозиторий

## Обработка ошибок

| Ситуация | Действие |
|----------|----------|
| Daily note не существует | Создать по шаблону `40 Templates/Daily Note.md` |
| Секция Tasks не найдена | Добавить секцию в конец файла |
| Git push failed | Сохранить локально, показать ошибку |
| Нет изменений в сессии | Сообщить "Нет действий для записи" |

## Советы

- Вызывай в конце рабочей сессии
- Полезно для weekly review
- Помогает отслеживать прогресс по проектам
- Создаёт историю изменений vault
- **Всегда коммить после сохранения сессии** (автоматически)

## Связанные команды

- `/obs:inbox` — обработка Inbox
- `/obs:inbox-scan` — OCR сканирование
